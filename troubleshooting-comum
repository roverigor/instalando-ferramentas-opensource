# üö® Troubleshooting Comum

**Objetivo:** Resolver os problemas mais comuns ao instalar e gerenciar ferramentas open source.

---

## üìã √çndice

1. [Problemas de DNS e Acesso](#dns-e-acesso)
2. [Problemas de SSL/HTTPS](#ssl-https)
3. [Problemas de Containers](#containers)
4. [Problemas de Recursos (RAM/CPU/Disco)](#recursos)
5. [Problemas de Portas](#portas)
6. [Problemas de Login/Credenciais](#login)
7. [Problemas de Atualiza√ß√£o](#atualizacao)
8. [Problemas Espec√≠ficos por Ferramenta](#especificos)

---

## üåê Problemas de DNS e Acesso

### Problema: "Site n√£o encontrado" (ERR_NAME_NOT_RESOLVED)

**Sintomas:**
- Navegador mostra erro "n√£o foi poss√≠vel encontrar o servidor"
- URL: `https://n8n.seudominio.com` n√£o abre

**Causas Poss√≠veis:**
1. DNS n√£o propagou ainda
2. DNS configurado incorretamente no Cloudflare
3. Nameservers n√£o alterados no registrador

**Solu√ß√µes:**

**Solu√ß√£o 1: Aguardar Propaga√ß√£o**
```
Tempo: 2-24 horas (geralmente 5-30 min)
A√ß√£o: Aguardar e tentar novamente
```

**Solu√ß√£o 2: Verificar DNS no Cloudflare**
```
1. Cloudflare ‚Üí DNS ‚Üí Records
2. Verificar:
   - Registro A para @ ‚Üí IP da VPS ‚úì
   - Registro A para * ‚Üí IP da VPS ‚úì
   - Proxy status: Proxied (nuvem laranja) ‚úì
3. Se faltando: adicionar registros
```

**Solu√ß√£o 3: Verificar Nameservers**
```
1. Ir no registrador do dom√≠nio
2. Verificar se nameservers s√£o do Cloudflare
3. Se n√£o: alterar para os nameservers do Cloudflare
```

**Solu√ß√£o 4: Testar DNS Manualmente**
```bash
# Via SSH na VPS
nslookup n8n.seudominio.com

# Deve retornar o IP da sua VPS
# Se n√£o retornar: DNS n√£o propagou ou est√° errado
```

---

### Problema: "Este site n√£o pode ser acessado" (ERR_CONNECTION_TIMED_OUT)

**Sintomas:**
- Navegador fica carregando e depois timeout
- Demora muito e n√£o conecta

**Causas Poss√≠veis:**
1. Container n√£o est√° rodando
2. Firewall bloqueando portas
3. VPS desligada

**Solu√ß√µes:**

**Solu√ß√£o 1: Verificar Container**
```
1. Portainer ‚Üí Containers
2. Buscar container da ferramenta
3. Status deve ser "running"
4. Se "exited": clicar em "Start"
5. Se em loop (restart): ver logs (problema na configura√ß√£o)
```

**Solu√ß√£o 2: Verificar Firewall**
```bash
# Via SSH
sudo ufw status

# Deve mostrar:
# 80/tcp ALLOW
# 443/tcp ALLOW

# Se bloqueado:
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw reload
```

**Solu√ß√£o 3: Verificar VPS**
```
1. Acessar painel do provedor (Hostinger/Contabo)
2. Verificar status da VPS
3. Se desligada: ligar
```

---

## üîí Problemas de SSL/HTTPS

### Problema: "Sua conex√£o n√£o √© privada" (ERR_CERT_INVALID)

**Sintomas:**
- Navegador bloqueia acesso
- Certificado SSL inv√°lido
- Aviso de seguran√ßa

**Causas Poss√≠veis:**
1. Certificado ainda n√£o gerado (aguardar)
2. Modo SSL/TLS incorreto no Cloudflare
3. DNS n√£o propagou

**Solu√ß√µes:**

**Solu√ß√£o 1: Aguardar Gera√ß√£o**
```
Tempo: 5-15 minutos ap√≥s DNS propagar
A√ß√£o: Aguardar e recarregar p√°gina
```

**Solu√ß√£o 2: Verificar Modo SSL no Cloudflare**
```
1. Cloudflare ‚Üí SSL/TLS ‚Üí Overview
2. Modo deve ser: "Full"
3. Se diferente: mudar para "Full"
4. Aguardar 5 minutos
5. Limpar cache do navegador (Ctrl+Shift+Del)
```

**Solu√ß√£o 3: For√ßar HTTPS**
```
1. Cloudflare ‚Üí SSL/TLS ‚Üí Edge Certificates
2. "Always Use HTTPS" ‚Üí ON
3. Recarregar p√°gina
```

---

### Problema: Loop Infinito (ERR_TOO_MANY_REDIRECTS)

**Sintomas:**
- P√°gina fica redirecionando infinitamente
- Navegador mostra erro "muitos redirecionamentos"

**Causa:**
- Modo SSL incorreto (geralmente "Flexible" com servidor HTTPS)

**Solu√ß√£o:**
```
1. Cloudflare ‚Üí SSL/TLS ‚Üí Overview
2. Mudar para: "Full"
3. Limpar cache do navegador (Ctrl+F5)
4. Recarregar p√°gina
```

---

## üê≥ Problemas de Containers

### Problema: Container em Loop (Restart Constante)

**Sintomas:**
- Portainer mostra container com status "restarting"
- Container nunca fica "running" por mais de alguns segundos

**Causas Poss√≠veis:**
1. Erro na configura√ß√£o (vari√°veis incorretas)
2. Falta de recursos (RAM/CPU insuficiente)
3. Depend√™ncia faltando (banco de dados n√£o iniciou)

**Solu√ß√µes:**

**Solu√ß√£o 1: Ver Logs**
```
1. Portainer ‚Üí Containers ‚Üí [container problem√°tico]
2. Clicar em "Logs"
3. Procurar mensagens de erro em vermelho
4. Identificar causa espec√≠fica
```

**Solu√ß√£o 2: Verificar Vari√°veis**
```
1. Portainer ‚Üí Stacks ‚Üí [sua stack]
2. Clicar em "Editor"
3. Revisar todas as vari√°veis:
   - Senhas corretas?
   - Dom√≠nios corretos?
   - Emails corretos?
4. Se erro: corrigir e "Update the stack"
```

**Solu√ß√£o 3: Verificar Recursos**
```
1. Portainer ‚Üí Host ‚Üí Dashboard
2. Ver uso de RAM e CPU
3. Se RAM > 90%: problema de recursos
4. Solu√ß√£o: upgrade de VPS ou remover outras ferramentas
```

**Solu√ß√£o 4: Verificar Depend√™ncias**
```
Exemplo: Chatwoot precisa de PostgreSQL + Redis

1. Ver logs de TODOS os containers da stack
2. Verificar se banco de dados iniciou
3. Se n√£o: dar mais tempo (2-3 minutos)
4. Se continuar: verificar logs do banco
```

---

### Problema: Container Parado (Exited)

**Sintomas:**
- Portainer mostra status "exited"
- Container n√£o est√° rodando

**Solu√ß√µes:**

**Solu√ß√£o 1: Iniciar Manualmente**
```
1. Portainer ‚Üí Containers ‚Üí [container parado]
2. Clicar em "Start"
3. Aguardar inicializa√ß√£o
4. Se parar novamente: ver logs
```

**Solu√ß√£o 2: Reiniciar Stack Completa**
```
1. Portainer ‚Üí Stacks ‚Üí [sua stack]
2. Clicar em "Stop this stack"
3. Aguardar todos pararem
4. Clicar em "Start this stack"
5. Aguardar todos iniciarem
```

---

## üíæ Problemas de Recursos

### Problema: RAM Insuficiente

**Sintomas:**
- Containers parando sozinhos
- VPS lenta
- Erro "OOM" (Out of Memory) nos logs

**Diagn√≥stico:**
```
1. Portainer ‚Üí Host ‚Üí Dashboard
2. Ver uso de RAM
3. Se > 90%: problema confirmado
```

**Solu√ß√µes:**

**Solu√ß√£o 1: Aumentar Swap (Paliativo)**
```bash
# Via SSH
# Criar arquivo swap de 2GB
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile

# Tornar permanente
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
```

**Solu√ß√£o 2: Upgrade de VPS (Definitivo)**
```
1. Acessar painel do provedor
2. Fazer upgrade do plano
3. Escolher plano com mais RAM
4. Geralmente: 2GB ‚Üí 4GB ou 8GB
```

**Solu√ß√£o 3: Otimizar Containers**
```
1. Remover ferramentas n√£o utilizadas
2. Limitar recursos de containers:
   - Editar stack
   - Adicionar limites de mem√≥ria
3. Usar vers√µes "lite" quando dispon√≠vel
```

---

### Problema: Disco Cheio

**Sintomas:**
- Erro ao criar novos containers
- Ferramentas n√£o salvam dados
- Logs mostram "no space left on device"

**Diagn√≥stico:**
```
1. Portainer ‚Üí Host ‚Üí Dashboard
2. Ver uso de disco
3. Se > 90%: problema confirmado
```

**Solu√ß√µes:**

**Solu√ß√£o 1: Limpar Imagens Antigas**
```bash
# Via SSH
docker image prune -a

# Confirmar (digite y)
# Isso remove imagens n√£o usadas
```

**Solu√ß√£o 2: Limpar Volumes √ìrf√£os**
```bash
# Via SSH
docker volume prune

# ‚ö†Ô∏è CUIDADO: s√≥ confirme se tiver backup
# Isso remove volumes n√£o conectados a containers
```

**Solu√ß√£o 3: Limpar Logs**
```bash
# Via SSH
# Limpar logs de containers
sudo sh -c 'truncate -s 0 /var/lib/docker/containers/*/*-json.log'
```

**Solu√ß√£o 4: Expandir Disco (Definitivo)**
```
1. Acessar painel do provedor
2. Expandir disco da VPS
3. Redimensionar parti√ß√£o:

sudo resize2fs /dev/sda1
```

---

## üîå Problemas de Portas

### Problema: "Porta j√° em uso"

**Sintomas:**
- Erro ao criar container
- Logs mostram "address already in use"

**Diagn√≥stico:**
```bash
# Via SSH
# Ver quais portas est√£o em uso
sudo netstat -tulpn | grep LISTEN
```

**Solu√ß√£o:**
```
1. Identificar qual processo est√° usando a porta
2. Parar o processo:
   sudo systemctl stop [nome_servico]
3. Ou mudar a porta no docker-compose:
   - Editar stack
   - Mudar porta (ex: 8080 ‚Üí 8081)
   - Update the stack
```

---

## üîê Problemas de Login/Credenciais

### Problema: "Credenciais Inv√°lidas"

**Sintomas:**
- N√£o consegue fazer login
- Senha/usu√°rio incorretos

**Causas Poss√≠veis:**
1. Digitou senha errada
2. Vari√°veis configuradas incorretamente na stack
3. Caps Lock ativado

**Solu√ß√µes:**

**Solu√ß√£o 1: Verificar Vari√°veis**
```
1. Portainer ‚Üí Stacks ‚Üí [ferramenta]
2. Clicar em "Editor"
3. Procurar vari√°veis de auth:
   - N8N_BASIC_AUTH_USER
   - N8N_BASIC_AUTH_PASSWORD
   - Ou equivalentes
4. Anotar usu√°rio e senha
5. Tentar login novamente
```

**Solu√ß√£o 2: Resetar Credenciais**
```
1. Editar stack no Portainer
2. Mudar senha/usu√°rio nas vari√°veis
3. "Update the stack"
4. Container reinicia automaticamente
5. Aguardar 1-2 minutos
6. Tentar login com novas credenciais
```

---

## üîÑ Problemas de Atualiza√ß√£o

### Problema: Atualiza√ß√£o Quebrou Ferramenta

**Sintomas:**
- Ap√≥s atualizar, ferramenta n√£o funciona
- Erro 500 ou p√°gina em branco
- Funcionalidades pararam de funcionar

**Solu√ß√£o: Rollback Imediato**
```
1. Portainer ‚Üí Stacks ‚Üí [ferramenta]
2. Clicar em "Editor"
3. Localizar linha da imagem:
   Exemplo: image: n8nio/n8n:1.26.0
4. Voltar para vers√£o anterior:
   Exemplo: image: n8nio/n8n:1.25.0
5. "Update the stack"
6. Aguardar container reiniciar
7. Testar funcionalidade
8. Se funcionou: sucesso!
9. Investigar changelog da vers√£o problem√°tica
```

---

## üõ†Ô∏è Problemas Espec√≠ficos por Ferramenta

### n8n

**Problema: Workflows n√£o executam**
```
Causa: Credenciais expiradas ou incorretas
Solu√ß√£o:
1. n8n ‚Üí Credentials
2. Testar cada credencial
3. Atualizar as que falharam
```

**Problema: Webhook n√£o responde**
```
Causa: Workflow desativado ou URL errada
Solu√ß√£o:
1. Verificar se workflow est√° ativo
2. Verificar URL do webhook
3. Testar com curl ou Postman
```

---

### Chatwoot

**Problema: Demora muito para iniciar**
```
Causa: Normal - Chatwoot √© pesado
Solu√ß√£o:
1. Aguardar 3-5 minutos na primeira vez
2. Ver logs: deve mostrar "Listening on..."
3. Se > 10 min: verificar RAM dispon√≠vel
```

**Problema: Inbox n√£o envia mensagens**
```
Causa: Configura√ß√£o de email/SMTP incorreta
Solu√ß√£o:
1. Chatwoot ‚Üí Settings ‚Üí Inboxes
2. Verificar configura√ß√µes do inbox
3. Testar conex√£o
```

---

### Evolution API

**Problema: QR Code n√£o aparece**
```
Causa: Inst√¢ncia n√£o criada corretamente
Solu√ß√£o:
1. Recriar inst√¢ncia
2. Aguardar 10 segundos
3. QR Code deve aparecer
```

**Problema: WhatsApp desconecta**
```
Causa: Normal ap√≥s algumas horas inativo
Solu√ß√£o:
1. Reconectar escaneando QR Code novamente
2. Usar "always online" se dispon√≠vel
```

---

## üÜò Quando Pedir Ajuda

Se ap√≥s seguir TODOS os troubleshootings acima o problema persistir:

**Informa√ß√µes para Incluir no Suporte:**

1. **Descri√ß√£o do Problema:**
   - O que voc√™ tentou fazer?
   - O que aconteceu?
   - O que voc√™ esperava que acontecesse?

2. **Logs Completos:**
   ```
   Portainer ‚Üí Containers ‚Üí [container] ‚Üí Logs
   Copiar √∫ltimas 50-100 linhas
   ```

3. **Configura√ß√£o:**
   ```
   - SO da VPS: Ubuntu 22.04
   - RAM: X GB
   - CPU: X cores
   - Disco: X GB dispon√≠vel
   - Vers√£o Docker: (docker --version)
   - Vers√£o Portainer: (ver no Portainer)
   ```

4. **Stack YAML:**
   ```
   Copiar conte√∫do da stack (sem senhas!)
   ```

5. **Prints de Tela:**
   - Erro no navegador
   - Status no Portainer
   - Configura√ß√£o do Cloudflare

---

## üìö Recursos √öteis

- **Comunidade Docker:** https://forums.docker.com
- **Documenta√ß√£o n8n:** https://docs.n8n.io
- **Documenta√ß√£o Chatwoot:** https://www.chatwoot.com/docs
- **Stack Overflow:** https://stackoverflow.com (busque seu erro)
- **ChatGPT/Claude:** Cole o erro e pe√ßa ajuda

---

**√öltima atualiza√ß√£o:** Outubro 2025  
**Vers√£o:** 1.0
